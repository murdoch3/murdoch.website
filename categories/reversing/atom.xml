<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title> - reversing</title>
    <link rel="self" type="application/atom+xml" href="https://murdoch.website/categories/reversing/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://murdoch.website"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-05-30T00:00:00+00:00</updated>
    <id>https://murdoch.website/categories/reversing/atom.xml</id>
    <entry xml:lang="en">
        <title>Decompiling an Encrypted Godot 3.5.1 Game</title>
        <published>2025-05-30T00:00:00+00:00</published>
        <updated>2025-05-30T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://murdoch.website/decompiling-godot-encrypted/"/>
        <id>https://murdoch.website/decompiling-godot-encrypted/</id>
        
        <content type="html" xml:base="https://murdoch.website/decompiling-godot-encrypted/">&lt;p&gt;&lt;em&gt;Disclaimer: This guide is intended for educational use only.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;decryption&quot;&gt;Decryption&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;problem&quot;&gt;Problem&lt;&#x2F;h3&gt;
&lt;p&gt;When we try to recover an encrypted Godot project with Godot RE Tools (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;GDRETools&#x2F;gdsdecomp&quot;&gt;link&lt;&#x2F;a&gt;), we get the following error:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img7.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;However, in this version of Godot, the key is stored unobfuscated within the game executable.  This post will show the process of finding this key in an project I exported myself (as discussed in the appendix).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;finding-the-key&quot;&gt;Finding the Key&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;analyzing-godot-s-source-code&quot;&gt;Analyzing Godot&#x27;s Source Code&lt;&#x2F;h4&gt;
&lt;p&gt;Since Godot is open-source, we can start our search by grep&#x27;ing over the source code for places where encryption, decryption, or keys are mentioned.  Searching for &lt;code&gt;encryption&lt;&#x2F;code&gt;, an interesting reference to &lt;code&gt;script_encryption_key&lt;&#x2F;code&gt; is found:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img8.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The reference is found in gdscript.cpp&#x27;s GDScript::load_byte_code method, which we know is used for the decryption process at runtime based on &lt;a href=&quot;https:&#x2F;&#x2F;docs.godotengine.org&#x2F;en&#x2F;3.5&#x2F;development&#x2F;compiling&#x2F;compiling_with_script_encryption_key.html&quot;&gt;this documentation page&lt;&#x2F;a&gt;:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img9.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Viewing this block of code in VS Code, we can see that the key is read into a uint8 Vector and is used to decrypt a file with AES256 ECB.  This step is performed for file paths ending in &quot;gde&quot;.  As &quot;gd&quot; is the standard file extension for Godot scripts, it seems likely this function is being used to decrypt each of the game&#x27;s encrypted scripts.
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img10.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;At this point, we want to see if we can find this function in a disassembler.  Luckily, Godot prints many useful error messages that we can use to perform string searches.  For example, we can peek at the macro expansion for the ERR_FAIL_COND_V macro seen above:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img11.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h4 id=&quot;finding-the-decryption-routine-in-ida&quot;&gt;Finding the Decryption Routine in IDA&lt;&#x2F;h4&gt;
&lt;p&gt;Using IDA, we can use the Strings subview and filter for a string matching the ERROR string we found from the expanded macro above:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img13.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We can now go to the address of the top result, the only string to match ours exactly.  Viewing the xrefs will take us to the function where it is used, which IDA has named &lt;code&gt;sub_1400DAE00&lt;&#x2F;code&gt; for my example binary.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;finding-the-key-1&quot;&gt;Finding the Key&lt;&#x2F;h4&gt;
&lt;p&gt;Having found the &lt;code&gt;load_byte_code&lt;&#x2F;code&gt; function, we can begin to look for the &lt;code&gt;script_execution_key&lt;&#x2F;code&gt;.  We know from the source code that it is copied over, one byte at a time, to a new vector, and that this is the only loop construct in the function.&lt;&#x2F;p&gt;
&lt;p&gt;Shortly after the condition string is referenced, we find such a loop construct in the IDA decompilation:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;C&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-C &quot;&gt;&lt;code class=&quot;language-C&quot; data-lang=&quot;C&quot;&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;...
&lt;&#x2F;span&gt;&lt;span&gt;	v87 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sub_140013410&lt;&#x2F;span&gt;&lt;span&gt;(&amp;amp;v87, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;	v12 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;( i = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; ; ++i )
&lt;&#x2F;span&gt;&lt;span&gt;	{
&lt;&#x2F;span&gt;&lt;span&gt;		v14 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;( v87 )
&lt;&#x2F;span&gt;&lt;span&gt;			v14 = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int &lt;&#x2F;span&gt;&lt;span&gt;*)(v87 - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;		v15 = v14 ? *v14 : &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;( v12 &amp;gt;= v15 )
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;break&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;( i &amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span&gt;|| (!v87 || v87 == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4 &lt;&#x2F;span&gt;&lt;span&gt;? (v16 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;) : (v16 = *(_DWORD *)(v87 - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;)), v12 &amp;gt;= v16) )
&lt;&#x2F;span&gt;&lt;span&gt;		{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;( v14 )
&lt;&#x2F;span&gt;&lt;span&gt;				v4 = *v14;
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sub_1415436C0&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;			  (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;unsigned int&lt;&#x2F;span&gt;&lt;span&gt;)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;VectorWriteProxy&amp;lt;unsigned char&amp;gt;::operator []&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;			  (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;unsigned int&lt;&#x2F;span&gt;&lt;span&gt;)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;C:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Users&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;murdoch&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Downloads&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;godot-3.5.1-stable&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;core&#x2F;vector.h&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;			  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;49&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;			  v12,
&lt;&#x2F;span&gt;&lt;span&gt;			  v4,
&lt;&#x2F;span&gt;&lt;span&gt;			  (__int64)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;p_index&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;			  (__int64)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;((Vector&amp;lt;T&amp;gt; *)(this))-&amp;gt;_cowdata.size()&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;			  (__int64)&amp;amp;Locale,
&lt;&#x2F;span&gt;&lt;span&gt;			  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sub_141543420&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;__debugbreak&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sub_140008C90&lt;&#x2F;span&gt;&lt;span&gt;(&amp;amp;v87);
&lt;&#x2F;span&gt;&lt;span&gt;		*(_BYTE *)(i + v87) = byte_1421E11B8[i];
&lt;&#x2F;span&gt;&lt;span&gt;		++v12;
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Without having to tease out much, we can tell that the static variable &lt;code&gt;byte_1421E11B8&lt;&#x2F;code&gt; is likely what we&#x27;re looking for.  This is because it is a static variable being read, one byte each iteration, into another buffer, just like in the source code.  Furthermore, we can see v87, the buffer the bytes are written into, appears to be initialized to size 32 before the loop via &lt;code&gt;sub_140013410&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;When we access &lt;code&gt;byte_1421E11B8&lt;&#x2F;code&gt;, we find our 32-byte key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;.data:0000000142159E38 byte_142159E38  db 60h, 0C1h, 1Fh, 4Ah, 0DBh, 59h, 28h, 0EDh, 0Ch, 80h
&lt;&#x2F;span&gt;&lt;span&gt;.data:0000000142159E38                                         ; DATA XREF: sub_1400DAE00+18D↑o
&lt;&#x2F;span&gt;&lt;span&gt;.data:0000000142159E42                 db 15h, 30h, 47h, 9Ah, 0EFh, 8Dh, 58h, 0F7h, 0C2h, 0F0h
&lt;&#x2F;span&gt;&lt;span&gt;.data:0000000142159E4C                 db 89h, 43h, 8, 0C2h, 0E9h, 44h, 6Ch, 0ECh, 5Bh, 37h, 3Eh
&lt;&#x2F;span&gt;&lt;span&gt;.data:0000000142159E57                 db 0FEh, 8 dup(0)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is the 32-byte key that I generated in the first step of the Appendix.  This key can then be used in Godot RE Tools to decrypt the Godot project&#x27;s scripts.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;appendix-building-an-encrypted-godot-3-5-1-project&quot;&gt;Appendix: Building an Encrypted Godot 3.5.1 Project&lt;&#x2F;h2&gt;
&lt;p&gt;Documentation: &lt;a href=&quot;https:&#x2F;&#x2F;docs.godotengine.org&#x2F;en&#x2F;3.5&#x2F;development&#x2F;compiling&#x2F;compiling_with_script_encryption_key.html&quot;&gt;Here&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;m just using the Godot Third-Person Shooter Demo to test.&lt;&#x2F;p&gt;
&lt;p&gt;First we need to generate a key to use for encryption:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To be able to use encryption, we need to build our own export templates, using an environment variable to specify our encryption key.  The documentation for this process can be found &lt;a href=&quot;https:&#x2F;&#x2F;docs.godotengine.org&#x2F;en&#x2F;stable&#x2F;contributing&#x2F;development&#x2F;compiling&#x2F;compiling_for_windows.html#creating-windows-export-templates&quot;&gt;here&lt;&#x2F;a&gt;.  Below are the PowerShell commands I used to build the export templates from the Godot 3.5.1 source (which can be found &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;godotengine&#x2F;godot&#x2F;releases&#x2F;tag&#x2F;3.5.1-stable&quot;&gt;here&lt;&#x2F;a&gt;):&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;powershell&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-powershell &quot;&gt;&lt;code class=&quot;language-powershell&quot; data-lang=&quot;powershell&quot;&gt;&lt;span&gt;cd &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;godot-3.5.1-stable&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;env:SCRIPT_AES256_ENCRYPTION_KEY&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;60c11f4adb5928ed0c801530479aef8d58f7c2f0894308c2e9446cec5b373efe&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;scons platform=windows tools=no target=release_debug bits=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32
&lt;&#x2F;span&gt;&lt;span&gt;scons platform=windows tools=no target=release bits=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32
&lt;&#x2F;span&gt;&lt;span&gt;scons platform=windows tools=no target=release_debug bits=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;64
&lt;&#x2F;span&gt;&lt;span&gt;scons platform=windows tools=no target=release bits=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;64
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With the export templates built, we can now export our Godot project.  Select Project &amp;gt; Export.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img2.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In the resulting window, select Add &amp;gt; Windows Desktop.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img3.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Under Options &amp;gt; Custom Template, set the path for the Debug and Release templates:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img12.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Then we can set our encryption settings in the script tab:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img4.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Then we can export the project:
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img5.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;After exporting, we&#x27;ll find the exported exe and pck files that we will attempt to reverse&#x2F;extract.
&lt;img src=&quot;&#x2F;img&#x2F;DecompilingGodotEncrypted&#x2F;img6.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Creating a Runescape Reflection Bot from Scratch</title>
        <published>2024-05-05T00:00:00+00:00</published>
        <updated>2024-05-05T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://murdoch.website/reflection-bot/"/>
        <id>https://murdoch.website/reflection-bot/</id>
        
        <content type="html" xml:base="https://murdoch.website/reflection-bot/">&lt;h2 id=&quot;preface&quot;&gt;Preface&lt;&#x2F;h2&gt;
&lt;p&gt;Game hacking and botting were my primary introduction to programming and cybersecurity as a kid. I would listen to Defcon talks (like &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=KmwhrWxpViw&quot;&gt;this&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=QoNdhlLPX-g&quot;&gt;this&lt;&#x2F;a&gt;), read &lt;a href=&quot;https:&#x2F;&#x2F;rshacking.wordpress.com&#x2F;&quot;&gt;old histories&lt;&#x2F;a&gt; of RuneScape hacking, and scroll through forums like UnknownCheats, totally rapt. I was excited by the idea that I would one day be able to understand these exploits of these seemingly impenetrable games that I was so familiar with. It wasn’t about wanting to cheat or make money from hacks for me – it was about the joy of understanding a trick or exploit alone. It was my excitement about learning game hacking that led me to &lt;a href=&quot;https:&#x2F;&#x2F;www.google.ca&#x2F;books&#x2F;edition&#x2F;_&#x2F;1bR0DQEACAAJ?hl=en&amp;amp;sa=X&amp;amp;ved=2ahUKEwjp3oSxo_eFAxWlkIkEHZ--CjwQre8FegQIAxAb&quot;&gt;start learning C++&lt;&#x2F;a&gt; in my early teens, after seeing a now deleted video from one “douggem” on learning game hacking.&lt;&#x2F;p&gt;
&lt;p&gt;Despite being a RuneScape player in my teens and having an interest in these hacks, I was never able to figure out how RuneScape bots were written. While there were many public resources written about different types of bots and how you might write a bot for an existing client, there were little to no resources for how you would start from scratch. This project aims to create a (private server) RuneScape bot using Java’s reflection API to implement an “inventory dropper” – a bot designed to automatically drop all items from the player’s inventory. This is not only to demonstrate the process of bot creation, but also to fill a gap in the public availability of educational resources on RuneScape botting: to help a younger version of myself get a little farther in his hacking goals.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;&#x2F;h2&gt;
&lt;p&gt;The goal of this project is to write a RuneScape bot using Java’s reflection API. Reflection allows Java to access the data and methods of Java classes at runtime, allowing us to programmatically interact with the running game client. This project seeks to extend an archived tutorial from the EctoTalk forum, which demonstrated the basics of writing a reflection&#x2F;injection bot client, but stopped short of applying those techniques to write an actual bot. This tutorial will focus only on using reflection towards the end of implementing an “inventory dropper” bot – automating the process of dropping all items in the player’s inventory. While simple, this will allow us to demonstrate how reflection can be strategically used to implement a bot using fields and methods discovered by reverse engineering the client.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;prior-work&quot;&gt;Prior Work&lt;&#x2F;h2&gt;
&lt;p&gt;During my research for this project, the only resource I found that shows how you might begin to write a reflection bot from scratch was &lt;a href=&quot;https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20200219171455&#x2F;https:&#x2F;&#x2F;ectotalk.com&#x2F;index.php?threads%2Fultimate-guide-how-to-write-a-runescape-injection-bot.6%2F&quot;&gt;this thread&lt;&#x2F;a&gt;, by a “Shenandoah”, on the now offline forum EctoTalk. While the post is about writing an injection bot, it also makes use of Java reflection to load the game’s client into our own process, giving us control over it. It is this code from this post that this project extends. Reading posts #1 and #2 up to the “Bytecode Basics” section can be considered required conceptual reading for this article.&lt;&#x2F;p&gt;
&lt;p&gt;Like him, we’ll be using the open-source Runescape private server &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;2006-Scape&#x2F;2006Scape&quot;&gt;2006scape&lt;&#x2F;a&gt; as the target for our bot.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;java-reflection&quot;&gt;Java Reflection&lt;&#x2F;h2&gt;
&lt;p&gt;There are three main steps this bot must perform:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Loading the game into a bot-controlled process&lt;&#x2F;li&gt;
&lt;li&gt;Reading the inventory array and inventory interface position information to find the location of items on the screen&lt;&#x2F;li&gt;
&lt;li&gt;Triggering drop events on each of the found items in the inventory&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;We will implement these three steps using Java’s reflection API. The &lt;a href=&quot;https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;api&#x2F;java&#x2F;lang&#x2F;reflect&#x2F;package-summary.html&quot;&gt;reflection API&lt;&#x2F;a&gt; allows a program to access the fields and methods of loaded classes at runtime. I will now give you a high-level idea of how we can use reflection to implement of these steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;The core Game class for Runescape extends Applet (or a subclass of Applet). We can load this class and then use reflection to instantiate it. This gives us a running instance of the game, within our bot process, that we can further interact with using reflection.&lt;&#x2F;li&gt;
&lt;li&gt;After finding the inventory array by reverse engineering the client – which is the trickiest part of the project – we can use reflection to make the field public and get its value. This is basically the same for finding the inventory positions.&lt;&#x2F;li&gt;
&lt;li&gt;Drop events can be triggered in Runescape by shift-clicking on the items of a player’s inventory. We can programmatically create our own keyboard and mouse events to simulate those, using reflection to submit them directly to the applet’s handlers.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;technical-breakdown&quot;&gt;Technical Breakdown&lt;&#x2F;h2&gt;
&lt;p&gt;The code for this project can be found &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;murdoch3&#x2F;DropperReflectionBot&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In implementing the bot, I used four classes: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;murdoch3&#x2F;DropperReflectionBot&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;Main.java&quot;&gt;Main&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;murdoch3&#x2F;DropperReflectionBot&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;ReflectionUtils.java&quot;&gt;ReflectionUtils&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;murdoch3&#x2F;DropperReflectionBot&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;ReflectionBot.java&quot;&gt;ReflectionBot&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;murdoch3&#x2F;DropperReflectionBot&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;BotKeyListener.java&quot;&gt;BotKeyListener&lt;&#x2F;a&gt;. As Main simply creates an instance of ReflectionBot, I will skip describing it further. Let’s break the remaining down class by class.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;reflectionutils&quot;&gt;ReflectionUtils&lt;&#x2F;h3&gt;
&lt;p&gt;ReflectionUtils provides three utility functions common to reflection operations that access fields or invoke methods. These functions save having to repeat the same code over and over again.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;getfield&quot;&gt;getField&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public static &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;amp;lt&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;?&amp;amp;gt; cl, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt; fieldName) throws
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;NoSuchFieldException &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; field = cl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getDeclaredField&lt;&#x2F;span&gt;&lt;span&gt;(fieldName);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    field.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setAccessible&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return&lt;&#x2F;span&gt;&lt;span&gt; field;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The first method, getField, takes a loaded class and a string fieldName, and returns a Field. The Field represents a variable attached to a class that we are accessing through reflection. This Field can later be used to get or set the field on an instance of that class. By setting the field as accessible, we are bypassing Java’s access checking for the field. For us, this means we can access private fields.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;setfield&quot;&gt;setField&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public static&lt;&#x2F;span&gt;&lt;span&gt; void &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setField&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt; cl, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt; fieldName, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt; object, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt; value) throws &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;NoSuchFieldException&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;IllegalAccessException &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; field = *getField*(cl, fieldName);
&lt;&#x2F;span&gt;&lt;span&gt;    field.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt;(object, value);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The second method, setField, takes a loaded class, a string FieldName, an Object that is an instance of the class, and a value to set the field to on the object. This is basically just a wrapper around getField, with an additional call to the field’s set method. Note: if you wanted to get a field’s value on an object, you could use the field’s get method, similarly to the way set is used here.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;invokemethod&quot;&gt;invokeMethod&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public static &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt; cl, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt; methodName, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[]&lt;&#x2F;span&gt;&lt;span&gt; parameterTypes, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt; object, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[]&lt;&#x2F;span&gt;&lt;span&gt; args) throws &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;NoSuchMethodException&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;InvocationTargetException&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;IllegalAccessException &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Method&lt;&#x2F;span&gt;&lt;span&gt; method = cl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getDeclaredMethod&lt;&#x2F;span&gt;&lt;span&gt;(methodName, parameterTypes);
&lt;&#x2F;span&gt;&lt;span&gt;    method.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setAccessible&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return&lt;&#x2F;span&gt;&lt;span&gt; method.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invoke&lt;&#x2F;span&gt;&lt;span&gt;(object, args);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The third method, invokeMethod, takes a loaded class, string methodName, a list of classes representing the parameter types, an object that is an instance of the class to invoke the method on, and a list of arguments corresponding to the parameters. Like with the fields, this method uses reflection to find the declared method with the given name and parameters and bypass access checks, but now also invokes it on the given object with the given arguments.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;reflectionbot&quot;&gt;ReflectionBot&lt;&#x2F;h3&gt;
&lt;p&gt;The job of this class is to load the game client, instantiate its main game class, and to load the game applet into its own window. This part is largely taken, with modifications, from the original EctoTalk post. As such, I will only cover it briefly in this section.&lt;&#x2F;p&gt;
&lt;p&gt;After loading the client’s JAR file (JAR files being used to distribute Java executables) we create an instantiate the client’s game class:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Load Game class
&lt;&#x2F;span&gt;&lt;span&gt;gameClass = cl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;loadClass&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Game&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Constructor&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt; gameClassInit = gameClass.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getDeclaredConstructor&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;gameClassInit.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setAccessible&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; turn off access checking
&lt;&#x2F;span&gt;&lt;span&gt;applet = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Applet&lt;&#x2F;span&gt;&lt;span&gt;)gameClassInit.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;newInstance&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then we can initialize our own JFrame, representing a window, and add this game applet to it. This will result in the game running within our own window.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;JFrame&lt;&#x2F;span&gt;&lt;span&gt; frame = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;JFrame&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Bot&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;frame.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setDefaultCloseOperation&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;JFrame&lt;&#x2F;span&gt;&lt;span&gt;.*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;EXIT&lt;&#x2F;span&gt;&lt;span&gt;\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;_ON&lt;&#x2F;span&gt;&lt;span&gt;\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;_CLOSE&lt;&#x2F;span&gt;&lt;span&gt;*);
&lt;&#x2F;span&gt;&lt;span&gt;frame.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setMinimumSize&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Dimension&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;765&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;8&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;503&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;28&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;frame.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setLocationRelativeTo&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;null&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;frame.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add&lt;&#x2F;span&gt;&lt;span&gt;(applet);
&lt;&#x2F;span&gt;&lt;span&gt;frame.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setVisible&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally for the game class, we initialize its fields and call its parent’s init function, just as are done in the client’s main function. (Since we are skipping the main class by creating the game object directly, we have to recreate its steps.)&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Recreating 2006rebotted&amp;#39;s main class
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setField&lt;&#x2F;span&gt;&lt;span&gt;(gameClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nodeID&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setField&lt;&#x2F;span&gt;&lt;span&gt;(gameClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;portOff&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(gameClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;setHighMem&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{}, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{});
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setField&lt;&#x2F;span&gt;&lt;span&gt;(gameClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;isMembers&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt; signLink = cl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;loadClass&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Signlink&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setField&lt;&#x2F;span&gt;&lt;span&gt;(signLink, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;storeid&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, signLink, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(signLink, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;startpriv&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;InetAddress&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, signLink, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;InetAddress&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getLocalHost&lt;&#x2F;span&gt;&lt;span&gt;()});
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; calling this RSApplet method
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(gameClass.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getSuperclass&lt;&#x2F;span&gt;&lt;span&gt;(), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;initClientFrame&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;503&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;765&lt;&#x2F;span&gt;&lt;span&gt;});
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;At this point the applet has been created successfully, and the game will run like normal. The last step is to attach our own key listener to trigger on key events. This will be the entry point for our bot functionality.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;BotKeyListener&lt;&#x2F;span&gt;&lt;span&gt; botKeyListener = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;BotKeyListener&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Component&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;addKeyListener&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyListener&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{botKeyListener});
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;botkeylistener&quot;&gt;BotKeyListener&lt;&#x2F;h3&gt;
&lt;p&gt;BotKeyListener is the class that does the actual work of the bot. It will listen for key presses on the applet, and upon detecting the arbitrary start key, will use reflection to drop the items in the player’s inventory. Reflection is used to submit the bot’s virtual key and mouse events directly to the game applet’s key and mouse listeners. Simulating user input in this way is the simplest way I found to trigger actions with the game – there does not appear to be any single function that performs an item drop that we could call.&lt;&#x2F;p&gt;
&lt;p&gt;An input method leaves us with having to find out what entities to perform inputs on. In this case, I needed to find where the inventory field and inventory interface information was being stored in the client. From this, we would be able to determine the positions of each item in the player’s inventory and use key and mouse events to trigger a drop on it.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;finding-the-inventory-fields&quot;&gt;Finding the Inventory Fields&lt;&#x2F;h4&gt;
&lt;p&gt;While it was tricky to determine exactly how to submit the mouse events to the game applet, most of the work of this bot was reverse engineering the client to find the inventory fields. I wanted to find two main things:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The inventory field: I was expecting to find an array or list that would represent the items in the player’s inventory. This would allow us to reflectively find which slots of the inventory had items in it, making the bot more efficient.&lt;&#x2F;li&gt;
&lt;li&gt;The inventory interface class&#x2F;fields: This would be the implementation for the inventory’s GUI in the game. Finding this would allow us to reflectively find where on the screen we would need to click.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Starting with a clone of the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;2006-Scape&#x2F;2006Scape&quot;&gt;game’s repo&lt;&#x2F;a&gt;, I grep’d for “inventory”:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image2.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Seeing that class9_1 in Game has an “isInventoryInterface” field, I went into the class to find what class9_1 was:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;RSInterface&lt;&#x2F;span&gt;&lt;span&gt; class9_1 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;RSInterface&lt;&#x2F;span&gt;&lt;span&gt;.interfaceCache[class9.children[l1]];
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Looking now at the RSInterface class, we find that it has an inv[] array and a method swapInventoryItems:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public&lt;&#x2F;span&gt;&lt;span&gt; void &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;swapInventoryItems&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; i, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; j) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; k = inv[i];
&lt;&#x2F;span&gt;&lt;span&gt;    inv[i] = inv[j];
&lt;&#x2F;span&gt;&lt;span&gt;    inv[j] = k;
&lt;&#x2F;span&gt;&lt;span&gt;    k = invStackSizes[i];
&lt;&#x2F;span&gt;&lt;span&gt;    invStackSizes[i] = invStackSizes[j];
&lt;&#x2F;span&gt;&lt;span&gt;    invStackSizes[j] = k;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To find out if these are the right fields, and how we can get the right RSInterface, we can set a breakpoint on the first line of this function, and then try swapping two items. After the breakpoint hits, we see:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image5.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The inv array is 28 items long, which is the maximum number of items in the player’s inventory. Further, the integers correspond to the items in my character’s inventory – the item ID 441 represents Iron Ore, and 0 represents an empty slot. We now know that if we can find the correct RSInterface, we can access the player’s current inventory reflectively.&lt;&#x2F;p&gt;
&lt;p&gt;To find the correct interface, we can move up the call stack to mainGameProcessor. The call to swapInventoryItems is on a class9:&lt;br &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Which is defined by:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image4.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;3214 is the index into the static field interfaceCache used to access the inventory’s RSInterface. Through the rest of my testing, I confirmed that this index is consistently used between runs and throughout the code. With this, we have found a way to access the inventory interface and the player’s inventory reflectively.&lt;&#x2F;p&gt;
&lt;p&gt;Some GUI information is also attached to this class, including the width, height, invSpritePadX and invSpritePadY, but we still need to find out how to find the start coordinates of the inventory GUI reflectively. This can be found by breaking on the following lines of the buildInterfaceMenu:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image3.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;where i2 and j2 are the inventory interface’s x and y coordinates. As this is being calculated outside of the class using a parent interface, I opted to just hardcode these values for the bot.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;performing-the-inventory-drop&quot;&gt;Performing the Inventory Drop&lt;&#x2F;h4&gt;
&lt;p&gt;Now that we have found our method of input and our inventory interface fields, we can put the bot together.&lt;&#x2F;p&gt;
&lt;p&gt;The work of the bot is in the keyPressed function. The bot starts on a key pressed event for the forward slash key.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public&lt;&#x2F;span&gt;&lt;span&gt; void &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;keyPressed&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt; e) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(e.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getKeyChar&lt;&#x2F;span&gt;&lt;span&gt;() == &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The first event we’ll send is a key down event for the shift key. When you click on an inventory item with the shift key pressed, the clicked item will be dropped.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Send shift down. With shift-drop enabled, clicking on an item will cause it to be dropped.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt; keyEvent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;VK_SHIFT&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;CHAR_UNDEFINED&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyListener&lt;&#x2F;span&gt;&lt;span&gt; kl : bot.applet.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getKeyListeners&lt;&#x2F;span&gt;&lt;span&gt;()) {
&lt;&#x2F;span&gt;&lt;span&gt;    kl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;keyPressed&lt;&#x2F;span&gt;&lt;span&gt;(keyEvent);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, we’ll use reflection to load the interfaceCache from the RSInterface class and then index that to get the inventory interface. We’ll use that to access all of the fields identified in the “Finding Inventory Fields” section.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Load the client&amp;#39;s inventory interface
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;?&amp;gt; rsInterfaceClass = bot.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;loadClass&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;RSInterface&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; interfaceCacheField = *getField*(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;interfaceCache&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[]&lt;&#x2F;span&gt;&lt;span&gt; interfaceCache = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[]&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;interfaceCacheField.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt; invInterface = interfaceCache[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3214&lt;&#x2F;span&gt;&lt;span&gt;];
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Get inventory contents
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; invField = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;inv&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int[]&lt;&#x2F;span&gt;&lt;span&gt; inv = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int[]&lt;&#x2F;span&gt;&lt;span&gt;)invField.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(invInterface);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; fInterfaceHeight = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;height&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; fInterfaceWidth = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;width&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; fInterfaceSpritePadX = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;invSpritePadX&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt; fInterfaceSpritePadY = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getField&lt;&#x2F;span&gt;&lt;span&gt;(rsInterfaceClass, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;invSpritePadY&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; interfaceStartX = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;569&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; int i2 = class9.childX\[l1\] + i;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; interfaceStartY = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;213&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; int j2 = class9.childY\[l1\] + l - j1;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; invWidth = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;)fInterfaceWidth.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(invInterface);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; invHeight = (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;)fInterfaceHeight.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(invInterface);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; timeBetweenActions = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;100&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now we’ll trigger click events to drop each item in the inventory. We’ll loop over the rows and columns using the height and width fields of the inventory interface. We’ll use the inventory array to check if there is an item in the current slot. Then we’ll calculate the click location, offset from the top-left corner of the slot. Finally, we’ll trigger the drop by directly calling the mouseMoved, mousePressed, and mouseReleased methods reflectively on the game’s RSApplet class. The reason why a mouseMoved event has to be sent is that the interface has to be loaded, which only occurs when the mouse moves over the inventory.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; r = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; r &amp;lt; invHeight; r++) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; c = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; c &amp;lt; invWidth; c++) {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; If there is not an item in this slot, move on
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(inv[r*invWidth + c] == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;continue&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Calculate item sprite location
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; invX = interfaceStartX + c * (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32 &lt;&#x2F;span&gt;&lt;span&gt;+ (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;)fInterfaceSpritePadX.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(invInterface));
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; invY = interfaceStartY + r * (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;32 &lt;&#x2F;span&gt;&lt;span&gt;+ (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;)fInterfaceSpritePadY.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(invInterface));
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Click in the middle of the sprite
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; clickX = invX + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;16&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; clickY = invY + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;16&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Generate mouse move event to the inventory
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt; mouseMoveEvent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;MOUSE_MOVED&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, clickX, clickY, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(bot.gameClass.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getSuperclass&lt;&#x2F;span&gt;&lt;span&gt;(), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mouseMoved&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{mouseMoveEvent});
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Thread&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(timeBetweenActions);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Mouse pressed event
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt; mouseEvent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;MOUSE_CLICKED&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, clickX, clickY, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(bot.gameClass.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getSuperclass&lt;&#x2F;span&gt;&lt;span&gt;(), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mousePressed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{mouseEvent});
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Thread&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(timeBetweenActions);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Mouse released event
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt; mouseReleaseEvent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;MOUSE_RELEASED&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, clickX, clickY, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;invokeMethod&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getClass&lt;&#x2F;span&gt;&lt;span&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getSuperclass&lt;&#x2F;span&gt;&lt;span&gt;(), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mouseReleased&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Class&lt;&#x2F;span&gt;&lt;span&gt;[]{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MouseEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;}, bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Object&lt;&#x2F;span&gt;&lt;span&gt;[]{mouseReleaseEvent});
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Thread&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(timeBetweenActions);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, we’ll release the shift key.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Release shift
&lt;&#x2F;span&gt;&lt;span&gt;keyEvent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;(bot.applet, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;VK_SHIFT&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyEvent&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;CHAR_UNDEFINED&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;KeyListener&lt;&#x2F;span&gt;&lt;span&gt; kl : bot.applet.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getKeyListeners&lt;&#x2F;span&gt;&lt;span&gt;()) {
&lt;&#x2F;span&gt;&lt;span&gt;    kl.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;keyReleased&lt;&#x2F;span&gt;&lt;span&gt;(keyEvent);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;demonstration&quot;&gt;Demonstration&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;CreatingABotFromScratch&#x2F;image6.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;further-work&quot;&gt;Further Work&lt;&#x2F;h2&gt;
&lt;p&gt;This “inventory dropper” was originally part of a larger mining bot that would mine a given ore until the character’s inventory was full, drop all of the items, and then start again. I decided to tighten the scope of this project to complete it in a more reasonable period of time. Extending this solution to perform mining would require being able to find the desired ore objects in the scene. The reverse engineering to find these ores has not been completed yet, and appears to be considerably more complex than just finding the inventory data due to the obfuscation, coupling, and complexity of the client. As such, it would be a worthwhile extension to this project, and would contribute greatly to public resources on creating bots from scratch.&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
